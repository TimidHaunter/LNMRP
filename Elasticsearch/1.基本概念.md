# elastic

倒排索引

![image-20220412103422232](C:\Users\1\AppData\Roaming\Typora\typora-user-images\image-20220412103422232.png)


ElasticSearch MySQL

index（索引） Database（数据库）

type（类型） table（数据表）

Doc（文档） Row（数据行）

Mapping（索引定义） Schema（结构定义）

Fields（字段） Column（列）

DSL SQL

## 映射关系 

映射关系不能被删除，要删除索引才行

映射关系能不能修改



mapping

新文档创建自动生成字段类型的映射关系，自动识别

### 字符串 string

text（分词） keyword（不分词）analyzed

### 数值 num

integer byte

### 日期 date

### 布尔 boolean

alias 别名

## 查询

must

term 精确查询 = 

bool

match 匹配查询

对要查询的数据分词

macth_all  where 1；

should

```php
$query_arr = [
    "bool" => [
        "filter" => [
            "range" => [
                "xxx" => [
                    "from" => $start,
                    "to" => $end
                ]
            ]
        ]
    ],
];

$query_arr = [
    "bool" => [
        "must" => [
            "match" => ["name"=>"bht"]
        ]
    ],
];

$query_arr = [
    "bool" => [
        "should" => [
            ['match' => ["name" => "bht"]],
            ['match' => ["sex" => "男"]],
            ['match' => ["age" => "24"]],
            ['match' => ["add" => "山东济南"]]
        ],
    ],
];

$query_arr = [
    "bool" => [
        "filter" => [
            "range" => [
                "xxx" => [
                    "gle" => 10,
                    "lte" => 20
                ]
            ]
        ]
    ],
];

$sort = ['xxx' => ['order' => 'desc']]
```



```php
GET /order_log/_doc/_serarch
{
 "query": {
      "match_all":{}
  }
}

GET /order_log/_doc/_serarch
{
  "query": {
      "term":{
        "uid":22
      }
  }
}
```



